<div class="container mt-5">
  <div class="row">
    <h1 class="main-title">Shopping</h1>
    <section class="col-md-3">
      <div class="sidebar">
        <h4 class="section-title">Sorting</h4>
        <div class="custom-select-wrapper mb-4">
          <select #selectItem class="form-select" aria-label="Sort products" (change)="SortingByPrice($event)">
            @for (item of SortingOption; track $index) {
              <option [value]="item.value">{{item.name}}</option>
            }

          </select>
        </div>

        <h4 class="section-title">Categories</h4>
        <ul class="list-group custom-list-group">
          <li
            (click)="SelectedId(0)"
            class="list-group-item custom-list-item"
            [class.active]="!productParams.categoryId || productParams.categoryId === 0">
            All
          </li>
          @for (item of category; track $index) {
            <li
              (click)="SelectedId(item.id)"
              class="list-group-item custom-list-item"
              [class.active]="item.id === productParams.categoryId">
              {{item.name}}
            </li>
          }
        </ul>
      </div>
    </section>

    <section class="col-md-9">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <div class="paging-container">
          <span class="text-dark">Showing {{ product.length }} of {{ productParams.pageSize*productParams.pageNumber }} products</span>
        </div>
        <div class="search-container">
          <div class="input-group search-bar">
            <input #search  (keyup.enter)="OnSearch(search.value)" (keyup)="OnSearch(search.value)" type="text" class="form-control" placeholder="Search...">
            <input type="button" (click)="OnSearch(search.value)" class="btn btn-danger" value="Search">
            <input type="button" (click)="OnReset()" class="btn btn-dark" value="Reset">
          </div>
        </div>
      </div>

      <div class="row g-4">
        <!-- Product Items -->
        @if (product && product.length > 0) {
          @for (item of product; track $index) {
            <ng-container>
              <app-shop-item class="product-item col-md-4 col-lg-4" [Product]="item"></app-shop-item>
            </ng-container>
          }
        } @else {
          <div class="w-100 d-flex flex-column align-items-center justify-content-center" style="min-height: 300px;">
            <i class="material-icons mb-2" style="font-size: 3rem; color: #dc3545;">sentiment_dissatisfied</i>
            <h3 class="text-danger">Product Not Found</h3>
            <p class="text-muted">Try changing your search or filter to find what you're looking for.</p>
          </div>
        }

        <!-- Pagination -->
        <div class="d-flex justify-content-center align-items-center">

        <app-pagination [pageSize]="productParams.pageSize" [totalCount]="totalCount" (PageChanged)="OnChangePage($event)"></app-pagination>
        </div>

      </div>
    </section>
  </div>
</div>